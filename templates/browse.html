{% extends 'layout.html' %}
{% block title %}Finder{% endblock %}
{% block content %}
<h2>Upload Files</h2>
<form method="post" enctype="multipart/form-data">
  {% csrf_token %} {{ form }}
  <button type="submit">Upload</button>
</form>

{% if success %}
<p class="success">{{ success }}</p>
{% endif %}

<h1>File Manager - {{ current_path }}</h1>

{% if error %}
<p class="error">{{ error }}</p>
{% endif %} 
{% if parent_path %}
<p>
  <a href="{% url 'filemanage:browse_folder' parent_path %}">.. (Parent Directory)</a>
</p>
{% else %}
<p>
  <a href="{% url 'filemanage:home' %}">(Home Directory)</a>
</p>
{% endif %}

<h2>Folders</h2>
<ul class="folder-list">
  {% for folder in folders %}
  <li>
    <a href="{% url 'filemanage:browse_folder' folder %}">{{ folder }}</a>
  </li>
  {% empty %}
  <li>No folders found</li>
  {% endfor %}
</ul>

<h2>Files</h2>
<ul class="file-list">
  {% for file in files %}
  <li>
    {% if folder_path %}
      <a href="{% url 'filemanage:view_file' folder_path=folder_path file_name=file %}" target="_blank">{{ file }}</a>
    {% else %}
      <a href="{% url 'filemanage:view_file' folder_path='/' file_name=file %}" target="_blank">{{ file }}</a>
    {% endif %}
  </li>
  {% empty %}
  <li>No files found</li>
  {% endfor %}
</ul>


{% endblock %}
