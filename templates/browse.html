{% extends 'layout.html' %}
{% block title %}Finder{% endblock %}
{% block content %}
<h2>Upload Files</h2>
<form method="post" enctype="multipart/form-data">
  {% csrf_token %} {{ form }}
  <button type="submit">Upload</button>
</form>

{% if success %}
<p class="success">{{ success }}</p>
{% endif %}

<h1>File Manager - {{ current_path }}</h1>

{% if error %}
<p class="error">{{ error }}</p>
{% endif %} {% if parent_path %}
<p>
  <a href="{% url 'filemanage:browse_folder' parent_path %}"
    >.. (Parent Directory)</a
  >
</p>
{% else %}
<p>
  <a href="{% url 'filemanage:home' %}">(Home Directory)</a>
</p>
{% endif %}

<h2>Folders</h2>
<ul class="folder-list">
  {% for folder in folders %}
  <li>
    <div>
      <a href="{% url 'filemanage:browse_folder' folder_path|add:folder %}">{{ folder }}</a>
      <form action="{% url 'filemanage:delete_item' folder_path|add:folder %}" method="POST" style="display:inline;">
        {% csrf_token %}
        <button type="submit">Delete</button>
      </form>
    </div>
  </li>
  {% empty %}
  <li>No folders found</li>
  {% endfor %}
</ul>

<h2>Files</h2>
<ul class="file-list">
  {% for file in files %}
  <li>
    <a href="">{{ file }}</a>
    <form action="{% url 'filemanage:delete_item' folder_path|add:current_path|add:'/'|add:file %}" method="POST" style="display:inline;">
      {% csrf_token %}
      <button type="submit">Delete</button>
  </form>
  </li>
  {% empty %}
  <li>No files found</li>
  {% endfor %}
</ul>

{% endblock %}
